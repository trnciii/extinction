<style>

html{
	font-family: monospace;
}

body{
	margin:0;
}

table{
	border-collapse:collapse;
}

th{
	padding:8px;
	position: sticky;
	top:0;
	background: lightcoral;
}

td{
	padding: 8px;
	background: lavenderblush;
}

tr:nth-child(odd) td{
	background: white;
}

img{
	height: 150;
}

.height{
	width: calc( 150px * 10 / 3 );
	object-fit:cover;
	object-position:100% 0%;
}

.stat{
	width: calc( 150px * 15 / 4 );
	object-fit: cover;
	object-position: 100% 0%;
}

</style>


<table>
	<thead id=head></thead>
	<tbody id=body></tbody>
</table>

<script src='index.js'></script>
<script>
const keys = ['type', 'length', 'alpha'];
const images = ['height', 'stat'];
const path = '../result/wiener-khinchin';


document.getElementById('head').innerHTML = '<tr>'
	+ '<th>ID</th>' + keys.map(k=>`<th><div style='display:flex;flex-direction:column;'>${k}<select id=filter_${k} onchange='draw()'><./select></div></th>`).join('')
	+ `<th>images</th>`
	+ '</tr>';

filters = Object.fromEntries(keys.map(k=>[k, document.getElementById(`filter_${k}`)]));

Object.entries(filters).forEach(([k,v])=>{
	v.innerHTML = `<option value=all>all</option>`
		+ [...new Set(Object.values(table).map(_v=>_v[k]))].sort()
			.map(x=>`<option value=${x}>${x}</option>`)
			.join('');
});


function filter(entries, key){
	const f = filters[key].value;
	if (f == 'all') return entries;
	else return entries.filter(([_k,_v])=>_v[key]==f);
}

function draw(){
	const _t = keys.reduce(filter, Object.entries(table));

	document.getElementById('body').innerHTML = _t.map(
		([k,v])=>'<tr>'
			+ `<td><a href=${path}/${k}>${k}</a></td>`
			+ keys.map((_k)=>`<td>${v[_k]}</td>`).join('')
			+ '<td><div style="margin: 10px 4px; display: inline;">'
			+ 	`<img class=height src=${path}/${k}/height.png></img>`
			+ 	`<img class=stat src=${path}/${k}/stat.png></img>`
			+ '</div></td>'
			+ '</tr>'
	).join('')
}

draw();
</script>